# ポモドーロタイマー Webアプリケーション アーキテクチャ

## 1. 概要
このアプリは、Flaskをバックエンド、HTML/CSS/JavaScriptをフロントエンドとしたポモドーロタイマーWebアプリです。UIは添付のモック画像に準拠し、進捗管理やタイマー機能を提供します。

## 2. アーキテクチャ構成

### フロントエンド
- **UI構成**: タイマー表示（円グラフ）、開始/リセットボタン、進捗表示（完了数・集中時間）
- **技術**: HTML, CSS, JavaScript
- **タイマー制御**: JavaScriptでカウントダウン・円グラフ描画・ボタン操作を実装
- **API通信**: 進捗データ取得・記録はREST API経由で行う
- **ロジック分離**: タイマー制御やAPI通信は関数/クラスで分離し、テストしやすい構造に

### バックエンド（Flask）
- **役割**: 進捗データの管理・API提供
- **API設計**: 進捗取得・記録用のREST API（例: `/api/progress`, `/api/complete`）
- **ロジック分離**: タイマーや進捗管理のビジネスロジックはFlask本体から分離し、サービス層（例: `services/progress_service.py`）で実装
- **データアクセス層**: 進捗データの保存・取得はリポジトリパターン等で抽象化し、テスト時はモックに差し替え可能
- **セッション管理**: 必要に応じてCookie等でユーザー識別

### データ保存
- **シンプルな場合**: サーバーのメモリやファイル（JSON等）
- **永続化・複数ユーザー対応**: SQLite等のDB

## 3. ユニットテスト容易化のための工夫
- バックエンドのロジック・データアクセス層を分離し、単体テスト可能に
- APIの入出力仕様・バリデーション・エラーハンドリングを明確化
- フロントエンドもロジックを分離し、Jest等でテスト可能な構造に
- テスト用設定・データを用意し、本番環境と分離
- `tests/`ディレクトリを設置し、各層のテストを配置

## 4. ディレクトリ構成例
```
project-root/
├── app.py                # Flaskアプリ本体
├── services/             # ビジネスロジック層
│   └── progress_service.py
├── static/
│   ├── css/style.css
│   └── js/timer.js
├── templates/
│   └── index.html
├── tests/                # ユニットテスト
│   ├── test_progress_service.py
│   └── ...
├── architecture.md       # 本ファイル
└── ...
```

## 5. 実装・開発の流れ
1. フロントエンドでタイマーUI・動作を実装
2. Flaskで進捗APIを用意し、フロントエンドと連携
3. 進捗の保存・取得機能を追加
4. 各層ごとにユニットテストを実装

---
このアーキテクチャにより、UIの美しさ・操作性と、保守性・テスト容易性を両立できます。
